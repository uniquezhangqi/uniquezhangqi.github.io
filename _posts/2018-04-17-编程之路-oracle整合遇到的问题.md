---
layout:     post             				# ä½¿ç”¨çš„å¸ƒå±€ï¼ˆä¸éœ€è¦æ”¹ï¼‰
title:      oracleæ•´åˆé‡åˆ°çš„é—®é¢˜          			# æ ‡é¢˜ 
subtitle:    					  				#å‰¯æ ‡é¢˜
date:       2018-04-17  					# æ—¶é—´
author:     Ian                  			# ä½œè€…
header-img: img/post-bg-re-vs-ng2.jpg	#è¿™ç¯‡æ–‡ç« æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡
catalog: true                        	# æ˜¯å¦å½’æ¡£
tags:                              		#æ ‡ç­¾
    - ç¼–ç¨‹ä¹‹è·¯
    - oracle
---

> æœ¬æ–‡é¦–æ¬¡å‘å¸ƒäº[My Blog](http://uniquezhangqi.top),ä½œè€…[@å¼ ç¦(Ian)](http://uniquezhangqi.top/about/),è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥ã€‚


ã€€ã€€æœ€è¿‘åœ¨æ­å»ºä¸€ä¸ªé¡¹ç›®æ¡†æ¶ï¼Œç”¨åˆ°äº†oracleï¼Œæ‰€ä»¥ä»ä¸­é‡åˆ°äº›é—®é¢˜è·Ÿå¤§å®¶åˆ†äº«ä¸‹ï¼Œä¹Ÿæ–¹ä¾¿è‡ªå·±ä»¥åå¤åˆ¶ç²˜è´´âœğŸ¿

####åœ¨Mavenä»“åº“ä¸­æ·»åŠ Oracleæ•°æ®åº“çš„JDBCé©±åŠ¨ä¾èµ–
> å‚è€ƒï¼š<https://blog.csdn.net/erlian1992/article/details/74279106>

```xml
<!-- æ·»åŠ oracle jdbc driver -->
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>ojdbc14</artifactId>
    <version>10.2.0.4.0</version>
    <type>pom</type>
</dependency>
```


`<bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource">`
æ‰¾ä¸åˆ°æ•°æ®æºçš„class

**ctrl+alt+shift+s -> Artifacts é‡Œé¢æŠŠjaråŒ…æ·»åŠ åˆ°mavené‡Œé¢å»**

```
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>ojdbc6</artifactId>
    <scope>system</scope>
    <systemPath>
        ${project.basedir}/src/lib/ojdbc6.jar
    </systemPath>
</dependency>
```

é…ç½®DBCP2.0æ•°æ®åº“è¿æ¥æ± ï¼š<https://my.oschina.net/liu13430/blog/298684>

####Cannot create PoolableConnectionFactory (ORA-00923: æœªæ‰¾åˆ°é¢„æœŸ FROM å…³é”®å­— 
1. é…ç½®SQL Server 2000æ•°æ®åº“è¿æ¥æ± æ—¶ï¼Œå±æ€§validationQueryé»˜è®¤å€¼ä¸ºâ€œselect 1â€ï¼Œ
2. é…ç½® MySql æ•°æ®åº“è¿æ¥æ± æ—¶ï¼Œå±æ€§validationQueryé»˜è®¤å€¼ä¸ºselect 'x'ï¼Œ
3. è€Œåœ¨Oracleæ•°æ®åº“è¿æ¥æ± ä¸­åº”è®¾ç½®ä¸ºâ€œvalidationQuery="select 1 from dual"â€


#### MySql æ•°æ®åº“è¿æ¥æ± é…ç½®ï¼š

```
<Context>  
    <Resource  
        type="javax.sql.DataSource"  
        username="test"  
        password="test"  
        driverClassName="com.mysql.jdbc.Driver"  
        maxIdle="5"   
        maxWait="5000"  
        validationQuery= select 'x'  
        url="jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=utf8"  
        maxActive="20"  
     />  
</Context> 
``` 

#### Oracle æ•°æ®åº“è¿æ¥æ± é…ç½®ï¼š

```xml
<Context>  
    <Resource  
        type="javax.sql.DataSource"  
        username="test"  
        password="test"  
        driverClassName="oracle.jdbc.driver.OracleDriver"  
        maxIdle="5"   
        maxWait="5000"  
        validationQuery="select 1 from dual"  
        url="jdbc:oracle:thin:@192.168.1.1:1521:test"  
        maxActive="20"  
     />  
</Context> 
```

#### validationQuery:
DruidDataSourceé…ç½®å±æ€§åˆ—è¡¨: <https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8>
ç”¨æ¥æ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„sqlï¼Œè¦æ±‚æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œå¸¸ç”¨select 'x'ã€‚
å¦‚æœvalidationQueryä¸ºnullï¼ŒtestOnBorrowã€testOnReturnã€testWhileIdleéƒ½ä¸ä¼šèµ·ä½œç”¨ã€‚



![](https://ws3.sinaimg.cn/large/006tKfTcgy1fqj5aochgoj309k09kmwz.jpg)
<b><center>æ‰«æå…³æ³¨ï¼šçƒ­çˆ±ç”Ÿæ´»çš„å¤§å”</center>
<b><center><font size="2">ï¼ˆ<font size="2" color="#FF0000">è½¬è½½æœ¬ç«™æ–‡ç« è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„</font> <font size="2" color="#0000FF">çƒ­çˆ±ç”Ÿæ´»çš„å¤§å”-uniquezhangqi</font><font size="2">ï¼‰</font>